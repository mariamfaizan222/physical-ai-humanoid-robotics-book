---
title: ROS 2 Packages and Workspaces
sidebar_position: 4
---

# ROS 2 Packages and Workspaces

In ROS 2, the fundamental unit of code organization and distribution is the **package**. Packages encapsulate related code, configuration files, launch files, and other resources. Understanding how to create, manage, and build these packages, along with the concept of workspaces, is crucial for any ROS 2 developer.

## What is a ROS 2 Package?

A ROS 2 package typically contains:
*   Source code (e.g., Python scripts, C++ nodes).
*   Header files (for C++).
*   Configuration files (e.g., launch files, YAML parameters).
*   Resource files (e.g., URDF models, meshes, icons).
*   A `package.xml` file: This XML file describes the package, including its name, version, author, description, and dependencies.
*   A build system file: This is usually `CMakeLists.txt` for C++ packages or `setup.py` and `setup.cfg` for Python packages (managed by `colcon`).

## Creating a New ROS 2 Package

You can create a new ROS 2 package using the `ros2 pkg create` command. Let's create a simple Python package:

```bash
# Navigate to your ROS 2 workspace's src directory
cd ~/ros2_ws/src

# Create a new Python package named 'my_robot_utils'
ros2 pkg create --build-type ament_python my_robot_utils
```

This command will:
*   Create a directory named `my_robot_utils`.
*   Generate a basic `package.xml` file.
*   Generate a `setup.py` and `setup.cfg` file for Python package management.
*   Create an empty Python package directory (e.g., `my_robot_utils/my_robot_utils`).

For C++ packages, you would use `--build-type ament_cmake`.

## ROS 2 Workspaces

A ROS 2 workspace is a directory structure that organizes your ROS 2 packages and allows `colcon` (the build tool) to find and build them. A typical workspace has the following structure:

```
ros2_ws/
├── src/             # Your source code for packages
│   ├── my_robot_utils/
│   └── another_package/
├── build/           # Intermediate build files (generated by colcon)
└── install/         # Installed packages (generated by colcon)
    └── ...
```

### Building Packages with `colcon`

`colcon` is the standard build tool for ROS 2. To build all packages in your `src` directory:

1.  Navigate to the root of your workspace:
    ```bash
    cd ~/ros2_ws
    ```
2.  Run the build command:
    ```bash
    colcon build
    ```
`colcon` will discover all packages in the `src` directory, compile them, and place the outputs in the `build` and `install` directories.

### Sourcing Your Workspace

After building, you need to "source" your workspace's `install/setup.bash` (or `setup.zsh`, `setup.ps1`) file to make your new packages available in your current shell session.

```bash
# Source the setup file
source install/setup.bash
```

Now, commands like `ros2 pkg list` should show your newly created package, and you can use `ros2 run my_robot_utils <executable_name>` to run nodes from your package.

## Best Practices

*   **Meaningful Names**: Use descriptive names for your packages.
*   **Clear Dependencies**: Ensure your `package.xml` accurately lists all dependencies.
*   **Modular Design**: Group related functionality into separate packages.
*   **Version Control**: Always use version control (like Git) for your workspace and packages.
---
